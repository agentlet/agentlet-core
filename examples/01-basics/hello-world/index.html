<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World - Agentlet Core Example</title>
    <link rel="icon" type="image/x-icon" href="../../../resources/favicons/favicon.ico">
    <link rel="stylesheet" href="../../shared/examples.css">
    <link rel="stylesheet" href="../../shared/two-column-layout.css">
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="two-column-container">
            <!-- Left Column: Content and Controls -->
            <div class="left-column">
                <div class="nav-breadcrumb">
                    <a href="../../">Examples</a> â†’ <a href="../">01-basics</a> â†’ hello-world
                </div>

                <h1>ğŸ¤– Hello World - Agentlet Core</h1>
                
                <p>This is the simplest possible Agentlet Core example. It demonstrates basic initialization and panel creation.</p>

                <div class="example-section">
                    <h3>What this example shows:</h3>
                    <ul>
                        <li>Loading Agentlet Core from the dist folder</li>
                        <li>Basic configuration setup</li>
                        <li>Panel initialization and display</li>
                        <li>Simple content rendering</li>
                    </ul>
                </div>

                <div class="controls">
                    <h4>Controls</h4>
                    <button onclick="initAgentlet()" id="initBtn">ğŸš€ Initialize Agentlet</button>
                    <button onclick="checkStatus()">ğŸ“Š Check Status</button>
                </div>

                <div class="example-section">
                    <h3>ğŸ“œ Simple Integration Code:</h3>
                    <p>This is all the code you need to add Agentlet Core to any webpage:</p>
                    <div class="code-block">
                        <h4>1. Configuration (Optional)</h4>
                        <pre><code class="language-javascript">// Configure before loading (optional)
window.agentletConfig = {
    debugMode: true,
    theme: 'default'
};</code></pre>
                        
                        <h4>2. Load and Initialize</h4>
                        <pre><code class="language-javascript">// Load the Agentlet Core script
const script = document.createElement('script');
script.src = 'path/to/agentlet-core.js';
script.onload = () => {
    // Create and initialize instance
    const agentlet = new window.AgentletCore.default(window.agentletConfig);
    agentlet.init().then(() => {
        console.log('âœ… Agentlet Core ready!');
        // Now window.agentlet contains all utilities
    });
};
document.head.appendChild(script);</code></pre>

                        <h4>3. Use the APIs</h4>
                        <pre><code class="language-javascript">// Access forms, tables, dialogs, and more
window.agentlet.forms.extract(document.querySelector('form'));
window.agentlet.utils.Dialog.info('Hello from Agentlet!');
window.agentlet.tables.extract(document.querySelector('table'));</code></pre>
                    </div>
                </div>
            </div>

            <!-- Right Column: Console and Status -->
            <div class="right-column">
                <div class="console-header">
                    <h3>ğŸ“Ÿ Console Output</h3>
                    <button onclick="clearConsole()" class="console-clear-btn">ğŸ—‘ï¸ Clear</button>
                </div>
                <div class="console-section" id="console"></div>
                
                <h3>ğŸ“Š Status</h3>
                <div class="status-section" id="status">
                    Click "Initialize Agentlet" to start the demo.
                </div>
                
                <h3>ğŸ“ˆ Statistics</h3>
                <div class="stats-section" id="stats">
                    <div>Messages logged: <span id="messageCount">0</span></div>
                    <div>Errors: <span id="errorCount">0</span></div>
                    <div>Warnings: <span id="warningCount">0</span></div>
                    <div>Last action: <span id="lastAction">None</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Console utilities -->
    <script src="../../shared/console-utils.js"></script>

    <script>
        let agentletInstance = null;
        
        // Configure Agentlet before loading
        window.agentletConfig = {
            debugMode: true,
            theme: 'default'
        };

        async function initAgentlet() {
            try {
                setButtonLoading('initBtn', true);
                updateStatus('Loading Agentlet Core...', 'info');
                log('ğŸ¤– Starting Agentlet Core initialization...');

                // Check if already loaded
                if (window.agentlet) {
                    log('âš ï¸ Agentlet Core already loaded, cleaning up first...', 'warning');
                    if (typeof window.agentlet.cleanup === 'function') {
                        await window.agentlet.cleanup();
                    }
                }

                // Simulate loading delay for demonstration
                await new Promise(resolve => setTimeout(resolve, 500));

                // Dynamically load Agentlet Core
                const script = document.createElement('script');
                script.src = '../../../dist/agentlet-core.js?' + Date.now();
                
                script.onload = () => {
                    log('âœ… Agentlet Core script loaded successfully', 'success');
                    
                    // Try multiple patterns to access AgentletCore constructor
                    let AgentletConstructor = null;
                    if (window.AgentletCore) {
                        AgentletConstructor = window.AgentletCore.default;
                    }
                    
                    if (AgentletConstructor) {
                        try {
                            log('ğŸš€ Creating AgentletCore instance...');
                            agentletInstance = new AgentletConstructor(window.agentletConfig);
                            
                            log('âš™ï¸ Starting initialization...');
                            agentletInstance.init().then(() => {
                                log('âœ… Agentlet Core initialized successfully', 'success');
                                log(`ğŸ“Š Available APIs: ${Object.keys(window.agentlet || {}).join(', ')}`);
                                updateStatus('Agentlet Core loaded successfully! Panel should be visible on the right.', 'success');
                                setButtonLoading('initBtn', false);
                            }).catch(error => {
                                log(`âŒ Initialization failed: ${error.message}`, 'error');
                                updateStatus('Initialization failed: ' + error.message, 'error');
                                setButtonLoading('initBtn', false);
                            });
                            
                        } catch (error) {
                            log(`âŒ Error creating AgentletCore instance: ${error.message}`, 'error');
                            updateStatus('Error creating instance: ' + error.message, 'error');
                            setButtonLoading('initBtn', false);
                        }
                    } else {
                        log('âŒ AgentletCore constructor not available', 'error');
                        log(`ğŸ” Available in window.AgentletCore: ${Object.keys(window.AgentletCore || {}).join(', ')}`);
                        updateStatus('AgentletCore constructor not found', 'error');
                        setButtonLoading('initBtn', false);
                    }
                };

                script.onerror = () => {
                    log('âŒ Failed to load Agentlet Core script', 'error');
                    updateStatus('Failed to load Agentlet Core. Make sure you ran "npm run build" first.', 'error');
                    setButtonLoading('initBtn', false);
                };

                document.head.appendChild(script);

            } catch (error) {
                log(`âŒ Error: ${error.message}`, 'error');
                updateStatus('Initialization error: ' + error.message, 'error');
                setButtonLoading('initBtn', false);
            }
        }

        function checkStatus() {
            log('ğŸ” Checking Agentlet status...');
            
            // Check for AgentletCore class
            if (window.AgentletCore) {
                log('âœ… AgentletCore class is available', 'success');
            } else {
                log('âŒ AgentletCore class not found', 'error');
            }
            
            // Check for agentlet instance
            if (window.agentlet) {
                log('âœ… Agentlet instance is loaded', 'success');
                log(`ğŸ“¦ Version: ${window.agentlet.version || 'unknown'}`);
                log(`ğŸ›ï¸ Panel visible: ${document.getElementById('agentlet-container') ? 'Yes' : 'No'}`);
                log(`âš™ï¸ Configuration: ${JSON.stringify(window.agentletConfig)}`);
                
                // Check available utilities
                const utils = window.agentlet.utils || {};
                log(`ğŸ› ï¸ Available utilities: ${Object.keys(utils).join(', ') || 'none'}`);
                
                // Check initialized state
                log(`ğŸ”„ Initialized: ${window.agentlet.initialized || false}`);
                
                updateStatus('Agentlet Core is running correctly', 'success');
            } else if (agentletInstance) {
                log('âš ï¸ AgentletCore instance created but window.agentlet not available yet', 'warning');
                log(`ğŸ“‹ Instance state: ${agentletInstance.initialized ? 'initialized' : 'not initialized'}`);
                updateStatus('Agentlet instance created but not fully initialized', 'warning');
            } else {
                log('âŒ No Agentlet instance found', 'error');
                
                // Check what's available in window
                const agentletRelated = Object.keys(window).filter(k => k.toLowerCase().includes('agent'));
                if (agentletRelated.length > 0) {
                    log(`ğŸ” Found agentlet-related objects: ${agentletRelated.join(', ')}`);
                } else {
                    log('ğŸ” No agentlet-related objects found in window');
                }
                
                updateStatus('Agentlet Core not initialized yet', 'warning');
            }
        }

        // Initialize when page loads (optional)
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸ“„ Hello World example loaded', 'success');
            updateStatus('Ready for Agentlet initialization', 'info');
        });
    </script>
</body>
</html>